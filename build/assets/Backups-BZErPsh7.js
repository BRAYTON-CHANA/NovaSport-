import{r as d,t as g,u as h,j as e}from"./index-g1PumTm4.js";import{S as k,H as y}from"./Header-HN8A8OWr.js";function j(){const[c,o]=d.useState(!1),{settings:s,updateSettings:i}=g(),{tiempoRestanteBackup:u,tieneCambiosSinGuardar:n,restaurarDesdeBackup:x,backupEnProgreso:l}=h(),m=t=>{const a=parseInt(t.target.value,10);!isNaN(a)&&a>0?i({backupInterval:a}):(t.target.value===""||a===0)&&i({backupInterval:0})},p=d.useCallback(async()=>{try{const a=`${await Neutralino.os.getPath("documents")}/BackupsApp`;await Neutralino.filesystem.readDirectory(a),await Neutralino.os.open(a)}catch{try{const r=`${await Neutralino.os.getPath("documents")}/BackupsApp`;await Neutralino.filesystem.createDirectory(r),await Neutralino.os.open(r)}catch(a){console.error("Error al crear o abrir la carpeta de backups:",a)}}},[]),b=t=>{const a=Math.floor(t/60),r=Math.floor(t%60);return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}`};return e.jsxs("div",{className:"flex h-screen overflow-hidden",children:[e.jsx(k,{sidebarOpen:c,setSidebarOpen:o}),e.jsxs("div",{className:"relative flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[e.jsx(y,{sidebarOpen:c,setSidebarOpen:o}),e.jsx("main",{className:"grow",children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8 w-full max-w-9xl mx-auto",children:[e.jsx("div",{className:"sm:flex sm:justify-between sm:items-center mb-8",children:e.jsx("h1",{className:"text-2xl md:text-3xl text-gray-800 dark:text-gray-100 font-bold",children:"Gestión de Backups"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-sm border border-gray-200 dark:border-gray-700 p-6 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Restaurar desde Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-5",children:"Carga un archivo de backup (.json) para restaurar todos los datos de la aplicación. Esta acción sobrescribirá los datos actuales de forma irreversible."}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{className:"btn bg-violet-500 hover:bg-violet-600 text-white disabled:opacity-50",onClick:x,disabled:l,children:l?"Proceso en curso...":"Seleccionar Archivo y Restaurar"}),e.jsx("button",{className:"btn border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 text-gray-600 dark:text-gray-300",onClick:p,children:"Abrir Carpeta de Backups"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Backups Automáticos"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-5",children:"Define un intervalo para que la aplicación guarde una copia de seguridad automáticamente. El backup solo se creará si existen cambios sin guardar."}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("label",{htmlFor:"backup-interval",className:"font-medium text-gray-700 dark:text-gray-200",children:"Intervalo de guardado (minutos):"}),e.jsx("input",{id:"backup-interval",type:"number",className:"form-input w-24 text-center dark:bg-gray-700 dark:text-gray-200",value:s.backupInterval>0?s.backupInterval:"",onChange:m,min:"0",placeholder:"Off"})]}),e.jsx("div",{className:"mt-6",children:s.backupInterval>0?e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Próximo intento de backup en:"}),e.jsx("p",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 tabular-nums tracking-widest",children:b(u)}),e.jsx("p",{className:`text-xs mt-1 ${n?"text-green-500":"text-gray-500 dark:text-gray-400"}`,children:n?"Cambios pendientes detectados. El backup se ejecutará.":"(El backup se omitirá si no hay cambios sin guardar)"})]}):e.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"El backup automático está desactivado."})})]})]})})]})]})}export{j as default};
