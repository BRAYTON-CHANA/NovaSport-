import{R as k,r as u,j as e}from"./index-g1PumTm4.js";import{D as y}from"./index.es-CE8XIQIh.js";const R=({onBack:g,onNext:p,referencias:n,setReferencias:x,errors:o,setErrors:m})=>{const[s,i]=k.useState({NroReferencia:"",Fecha:new Date,Importe:""}),d=u.useMemo(()=>n.reduce((t,r)=>t+parseFloat(r.Importe||0),0),[n]),c=t=>{const{name:r,value:a}=t.target;i(l=>({...l,[r]:a})),o[r]&&m(l=>({...l,[r]:null}))},b=t=>{i(r=>({...r,Fecha:t}))},h=()=>{if(!s.NroReferencia||!s.Importe){alert("El N° de Referencia y el Importe son obligatorios.");return}x(t=>[...t,{id:crypto.randomUUID(),...s,Importe:parseFloat(s.Importe),Fecha:s.Fecha.toISOString().slice(0,10)}]),i({NroReferencia:"",Fecha:new Date,Importe:""})},j=t=>{x(r=>r.filter(a=>a.id!==t))};return e.jsxs("div",{className:"space-y-6",children:[" ",e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800/50 shadow-lg rounded-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Añadir Referencia de Pago"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",htmlFor:"NroReferencia",children:["N° Referencia ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{id:"NroReferencia",type:"text",name:"NroReferencia",value:s.NroReferencia,onChange:c,className:"form-input w-full dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",htmlFor:"Fecha",children:["Fecha ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx(y,{selected:s.Fecha,onChange:b,dateFormat:"dd/MM/yyyy",className:"form-input w-full dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",htmlFor:"Importe",children:["Importe ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{id:"Importe",type:"number",name:"Importe",value:s.Importe,onChange:c,className:"form-input w-full dark:bg-gray-700"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:h,className:"btn bg-indigo-500 hover:bg-indigo-600 text-white",children:"Añadir Referencia"})})]}),e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800/50 shadow-lg rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Resumen de Pagos"}),n.length===0?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h4",{className:"mt-2 text-md font-semibold text-gray-800 dark:text-gray-100",children:"Sin referencias de pago"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Añade una referencia usando el formulario de arriba."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs font-semibold uppercase text-gray-500 bg-gray-50 dark:bg-gray-700 dark:bg-opacity-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:"N° Referencia"})}),e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-left",children:"Fecha"})}),e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-right",children:"Importe"})}),e.jsx("th",{className:"p-2 whitespace-nowrap",children:e.jsx("div",{className:"font-semibold text-center",children:"Acción"})})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700",children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 whitespace-nowrap",children:t.NroReferencia}),e.jsx("td",{className:"p-2 whitespace-nowrap",children:t.Fecha}),e.jsxs("td",{className:"p-2 whitespace-nowrap text-right",children:["S/ ",parseFloat(t.Importe).toFixed(2)]}),e.jsx("td",{className:"p-2 whitespace-nowrap text-center",children:e.jsx("button",{onClick:()=>j(t.id),className:"text-rose-500 hover:text-rose-600 font-medium",children:"Eliminar"})})]},t.id))})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-lg shadow-inner w-full max-w-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Importe Total:"}),e.jsxs("span",{className:"text-2xl font-extrabold text-emerald-600 dark:text-emerald-400",children:["S/ ",d.toFixed(2)]})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 text-right",children:"Este será el importe final de la boleta/factura."})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[e.jsx("button",{type:"button",onClick:g,className:"btn bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Atrás"}),e.jsx("button",{type:"button",onClick:p,className:"btn bg-indigo-500 hover:bg-indigo-600 text-white",disabled:n.length===0,children:"Siguiente"})]})]})},F=({onBack:g,onSave:p,garantiaActiva:n,setGarantiaActiva:x,garantiasData:o,handleGarantiasChange:m,referenciasGarantia:s,setReferenciasGarantia:i})=>{const[d,c]=u.useState({NroReferencia:"",Fecha:new Date,Importe:""}),b=u.useMemo(()=>s.reduce((a,l)=>a+parseFloat(l.Importe||0),0),[s]),h=a=>{const{name:l,value:N}=a.target;c(f=>({...f,[l]:N}))},j=a=>{c(l=>({...l,Fecha:a}))},t=()=>{if(!d.NroReferencia||!d.Importe){alert("El N° de Referencia y el Importe son obligatorios para la garantía.");return}i(a=>[...a,{id:crypto.randomUUID(),...d,Importe:parseFloat(d.Importe),Fecha:d.Fecha.toISOString().slice(0,10)}]),c({NroReferencia:"",Fecha:new Date,Importe:""})},r=a=>{i(l=>l.filter(N=>N.id!==a))};return e.jsxs("form",{onSubmit:a=>{a.preventDefault(),p()},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800/50 p-4 rounded-lg shadow-lg",children:[e.jsx("input",{type:"checkbox",id:"activarGarantia",checked:n,onChange:a=>x(a.target.checked),className:"form-checkbox h-5 w-5 text-indigo-600 rounded"}),e.jsx("label",{htmlFor:"activarGarantia",className:"ml-3 text-lg font-bold text-gray-800 dark:text-gray-100",children:"¿Registrar o Aumentar Garantía?"})]}),e.jsxs("div",{className:`space-y-6 transition-opacity duration-300 ${n?"opacity-100":"opacity-40 pointer-events-none"}`,children:[e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800/50 shadow-lg rounded-lg",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Datos de la Garantía"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Descripción"}),e.jsx("textarea",{name:"descripcion",value:o.descripcion,onChange:m,className:"form-textarea w-full dark:bg-gray-700",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Dirigido A"}),e.jsx("input",{type:"text",name:"dirigidoA",value:o.dirigidoA,onChange:m,className:"form-input w-full dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Cuenta Corriente"}),e.jsx("input",{type:"text",name:"cuentaCorriente",value:o.cuentaCorriente,onChange:m,className:"form-input w-full dark:bg-gray-700"})]})]})]}),e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800/50 shadow-lg rounded-lg",children:[e.jsx("h3",{className:"text-md font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Añadir Referencia de Pago para Garantía"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:["N° Referencia ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",name:"NroReferencia",value:d.NroReferencia,onChange:h,className:"form-input w-full dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Fecha"}),e.jsx(y,{selected:d.Fecha,onChange:j,dateFormat:"dd/MM/yyyy",className:"form-input w-full dark:bg-gray-700"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:["Importe ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"number",name:"Importe",value:d.Importe,onChange:h,className:"form-input w-full dark:bg-gray-700"})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:t,className:"btn bg-sky-500 hover:bg-sky-600 text-white",children:"Añadir Referencia de Garantía"})})]}),e.jsxs("div",{className:"p-5 bg-white dark:bg-slate-800/50 shadow-lg rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Resumen de Garantía"}),s.length===0?e.jsx("div",{className:"text-center py-6",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Aún no se han agregado referencias para la garantía."})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs font-semibold uppercase text-gray-500 bg-gray-50 dark:bg-gray-700 dark:bg-opacity-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"N° Referencia"}),e.jsx("th",{className:"p-2",children:"Fecha"}),e.jsx("th",{className:"p-2 text-right",children:"Importe"}),e.jsx("th",{className:"p-2 text-center",children:"Acción"})]})}),e.jsx("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700",children:s.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2",children:a.NroReferencia}),e.jsx("td",{className:"p-2",children:a.Fecha}),e.jsxs("td",{className:"p-2 text-right",children:["S/ ",parseFloat(a.Importe).toFixed(2)]}),e.jsx("td",{className:"p-2 text-center",children:e.jsx("button",{type:"button",onClick:()=>r(a.id),className:"text-rose-500 hover:text-rose-600 font-medium",children:"Eliminar"})})]},a.id))})]})}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx("div",{className:"bg-slate-100 dark:bg-slate-900 p-4 rounded-lg shadow-inner w-full max-w-sm",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"Monto Total Garantía:"}),e.jsxs("span",{className:"text-2xl font-extrabold text-sky-600 dark:text-sky-400",children:["S/ ",b.toFixed(2)]})]})})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:g,className:"btn bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-100 hover:bg-gray-300 dark:hover:bg-gray-600",children:"Atrás"}),e.jsx("button",{type:"submit",className:"btn bg-emerald-500 hover:bg-emerald-600 text-white",children:n?"Guardar Boleta y Garantía":"Guardar Boleta (sin Garantía)"})]})]})};export{R as F,F as a};
