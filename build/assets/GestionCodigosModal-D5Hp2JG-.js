import{u as N,r as d,j as e,s as n}from"./index-g1PumTm4.js";const k=({isVisible:x,onClose:u,codigos:c})=>{const{agregarRegistro:m,actualizarRegistro:j,eliminarRegistro:h}=N(),[t,i]=d.useState({prefijo:"",ciudad:""}),[a,l]=d.useState(null);if(d.useEffect(()=>{a||i({prefijo:"",ciudad:""})},[a]),!x)return null;const o=r=>{const{name:s,value:b}=r.target;i(y=>({...y,[s]:b}))},f=async r=>{if(r.preventDefault(),!t.prefijo){alert("El campo 'Prefijo' no puede estar vacío.");return}try{a?(await j(n,a,t),alert("Prefijo actualizado con éxito.")):(await m(n,t),alert("Prefijo añadido con éxito.")),l(null)}catch(s){console.error("Error al guardar el prefijo:",s),alert("Ocurrió un error al guardar.")}},g=r=>{l(r.id),i({prefijo:r.prefijo,ciudad:r.ciudad})},p=async r=>{if(window.confirm("¿Está seguro de que desea eliminar este prefijo?"))try{await h(n,r),alert("Prefijo eliminado con éxito.")}catch(s){console.error("Error al eliminar el prefijo:",s),alert("Ocurrió un error al eliminar.")}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-lg",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-100",children:"Gestionar Prefijos de Documento"}),e.jsxs("form",{onSubmit:f,className:"mb-6 pb-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Prefijo"}),e.jsx("input",{type:"text",name:"prefijo",value:t.prefijo,onChange:o,className:"form-input w-full dark:bg-gray-700",placeholder:"Ej. B017"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Ciudad"}),e.jsx("input",{type:"text",name:"ciudad",value:t.ciudad,onChange:o,className:"form-input w-full dark:bg-gray-700",placeholder:"Ej. Cusco"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[a&&e.jsx("button",{type:"button",onClick:()=>l(null),className:"btn border-gray-200 dark:border-gray-700 text-gray-800 dark:text-gray-100",children:"Cancelar Edición"}),e.jsx("button",{type:"submit",className:"btn bg-indigo-500 hover:bg-indigo-600 text-white",children:a?"Actualizar":"Añadir"})]})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"table-auto w-full dark:text-gray-300",children:[e.jsx("thead",{className:"text-xs font-semibold uppercase text-gray-400 bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2",children:"Prefijo"}),e.jsx("th",{className:"p-2",children:"Ciudad"}),e.jsx("th",{className:"p-2",children:"Acciones"})]})}),e.jsxs("tbody",{className:"text-sm divide-y divide-gray-100 dark:divide-gray-700",children:[c.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"p-2 text-center",children:r.prefijo}),e.jsx("td",{className:"p-2 text-center",children:r.ciudad}),e.jsxs("td",{className:"p-2 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>g(r),className:"text-yellow-500 hover:text-yellow-700",children:"Editar"}),e.jsx("button",{onClick:()=>p(r.id),className:"text-red-500 hover:text-red-700",children:"Eliminar"})]})]},r.id)),c.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"p-4 text-center text-gray-500",children:"No hay prefijos definidos."})})]})]})}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{onClick:u,className:"btn bg-gray-500 hover:bg-gray-600 text-white",children:"Cerrar"})})]})})};export{k as G};
