import{u as v,r as c,j as e,q as m}from"./index-g1PumTm4.js";const w=({isVisible:l,onClose:x,instalaciones:n})=>{const{agregarRegistro:g,actualizarRegistro:h,eliminarRegistro:y}=v(),[s,o]=c.useState({nombre:""}),[t,d]=c.useState(null);c.useEffect(()=>{l||(o({nombre:""}),d(null))},[l]);const p=r=>{const{name:a,value:b}=r.target;o(i=>({...i,[a]:b}))},f=r=>{d(r.id),o({nombre:r.nombre})},u=()=>{d(null),o({nombre:""})},N=async r=>{if(r.preventDefault(),!s.nombre||!s.nombre.trim()){alert("El campo 'Nombre' no puede estar vacío.");return}try{const a=s.nombre.trim();if(n.some(i=>i.nombre.toLowerCase()===a.toLowerCase()&&i.id!==t)){alert("Ya existe una instalación con ese nombre.");return}t?await h(m,t,{nombre:a}):await g(m,{nombre:a}),u()}catch(a){console.error("Error al guardar la instalación:",a),alert("Ocurrió un error al guardar.")}},j=async r=>{if(window.confirm("¿Está seguro de que desea eliminar esta instalación? Los registros existentes no se verán afectados, pero no podrá seleccionarla en el futuro."))try{await y(m,r)}catch(a){console.error("Error al eliminar la instalación:",a),alert("Ocurrió un error al eliminar.")}};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-gray-100 border-b pb-2 border-gray-200 dark:border-gray-700",children:"Gestionar Instalaciones"}),e.jsx("form",{onSubmit:N,className:"mb-4",children:e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs("div",{className:"grow",children:[e.jsx("label",{htmlFor:"nombreInstalacion",className:"block text-sm font-medium mb-1 dark:text-gray-300",children:"Nombre de la Instalación"}),e.jsx("input",{id:"nombreInstalacion",type:"text",name:"nombre",value:s.nombre,onChange:p,className:"form-input w-full dark:bg-gray-700",placeholder:"Ej. Piscina Olímpica"})]}),e.jsx("button",{type:"submit",className:"btn bg-indigo-500 hover:bg-indigo-600 text-white whitespace-nowrap",children:t?"Actualizar":"Añadir"}),t&&e.jsx("button",{type:"button",onClick:u,className:"btn border-gray-300 dark:border-gray-600 text-gray-800 dark:text-gray-100",children:"Cancelar"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:e.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:n&&n.length>0?n.map(r=>e.jsxs("li",{className:"py-2 flex justify-between items-center",children:[e.jsx("span",{className:"dark:text-gray-300",children:r.nombre}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f(r),className:"text-sm font-medium text-indigo-500 hover:text-indigo-700",children:"Editar"}),e.jsx("button",{onClick:()=>j(r.id),className:"text-sm font-medium text-red-500 hover:text-red-700",children:"Eliminar"})]})]},r.id)):e.jsx("li",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay instalaciones definidas."})})}),e.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:x,className:"btn bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-gray-100",children:"Cerrar"})})]})}):null};export{w as G};
